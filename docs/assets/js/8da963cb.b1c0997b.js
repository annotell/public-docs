"use strict";(self.webpackChunkkognic_sdk_docs=self.webpackChunkkognic_sdk_docs||[]).push([[9439],{5270:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>l});var o=i(4848),a=i(8453);const s={title:"annotell-input-api to kognic-io"},r=void 0,t={id:"a2k_migration_guide",title:"annotell-input-api to kognic-io",description:"Overview",source:"@site/docs/a2k_migration_guide.md",sourceDirName:".",slug:"/a2k_migration_guide",permalink:"/docs/a2k_migration_guide",draft:!1,unlisted:!1,editUrl:"https://github.com/annotell/public-docs/edit/master/docs-src/docs/a2k_migration_guide.md",tags:[],version:"current",frontMatter:{title:"annotell-input-api to kognic-io"},sidebar:"docs",previous:{title:"The Python client",permalink:"/docs/openlabel/python-client"}},d={},l=[{value:"Overview",id:"overview",level:2},{value:"Breaking changes",id:"breaking-changes",level:2},{value:"New packages",id:"new-packages",level:3},{value:"Packaging and imports",id:"packaging-and-imports",level:3},{value:"Removal of legacy code",id:"removal-of-legacy-code",level:3},{value:"Named arguments",id:"named-arguments",level:3},{value:"Non-breaking changes",id:"non-breaking-changes",level:2},{value:"Environment variables",id:"environment-variables",level:3},{value:"Validation",id:"validation",level:3}];function c(e){const n={admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,o.jsx)(n.p,{children:"In September 2022 Annotell rebranded as Kognic."}),"\n",(0,o.jsxs)(n.p,{children:["We took opportunity to make some changes to our public Python libraries during the transition. Some of these changes are incompatible with code written against the last version of ",(0,o.jsx)(n.code,{children:"annotell-input-api"})," (1.3.1 at time of writing)."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"annotell-input-api"})," will now only be updated to fix critical bugs. All users are encouraged to migrate to ",(0,o.jsx)(n.code,{children:"kognic-io"})," as soon as possible."]}),"\n",(0,o.jsx)(n.h2,{id:"breaking-changes",children:"Breaking changes"}),"\n",(0,o.jsx)(n.h3,{id:"new-packages",children:"New packages"}),"\n",(0,o.jsxs)(n.p,{children:["Packages under ",(0,o.jsx)(n.code,{children:"annotell.input_api"})," were moved to ",(0,o.jsx)(n.code,{children:"kognic.io"}),". In most cases, updating imports is all that will be needed for client code to continue working."]}),"\n",(0,o.jsx)(n.h3,{id:"packaging-and-imports",children:"Packaging and imports"}),"\n",(0,o.jsxs)(n.p,{children:["Previously some classes could be imported via multiple packages due to how we had used ",(0,o.jsx)(n.code,{children:"*"})," imports internally. The ",(0,o.jsx)(n.code,{children:"kognic.io.model.*"})," subpackages are now stricter about which internal classes they export than their equivalents in ",(0,o.jsx)(n.code,{children:"annotell.input_api.model.*"})]}),"\n",(0,o.jsxs)(n.p,{children:["It is no longer possible to, for example, use ",(0,o.jsx)(n.code,{children:"from kognic.io.model.scene.lidars_and_cameras import *"})," or ",(0,o.jsx)(n.code,{children:"from kognic.io.model.lidars_and_cameras import IMUData"})," to import ",(0,o.jsx)(n.code,{children:"IMUData"})," along with all other classes related to Lidar+Camera scenes."]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["Replace instances of ",(0,o.jsx)(n.code,{children:"from annotell.input_api.model.input.xxx import *"})," with imports for specific classes from ",(0,o.jsx)(n.code,{children:"kognic.io.model.xxx"})," packages, or with imports from other packages in cases where the import has broken."]})}),"\n",(0,o.jsx)(n.h3,{id:"removal-of-legacy-code",children:"Removal of legacy code"}),"\n",(0,o.jsx)(n.p,{children:"Legacy calibration models were removed, having been deprecated since 2021-11."}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["Use the typed calibrations from ",(0,o.jsx)(n.code,{children:"kognic.io.model.calibration.camera"})," and ",(0,o.jsx)(n.code,{children:"kognic.io.model.calibration.lidar"})," instead of the generic ",(0,o.jsx)(n.code,{children:"annotell.input_api.model.sensors.LidarCalibration"})," and ",(0,o.jsx)(n.code,{children:"CameraCalibration"}),"."]})}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"get_annotations"})," method was removed, having been deprecated since 2021-09."]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["Use ",(0,o.jsx)(n.code,{children:"get_project_annotations"})," instead."]})}),"\n",(0,o.jsx)(n.h3,{id:"named-arguments",children:"Named arguments"}),"\n",(0,o.jsxs)(n.p,{children:["Many scene model objects such as ",(0,o.jsx)(n.code,{children:"Image"})," and ",(0,o.jsx)(n.code,{children:"PointCloud"})," were converted to use pydantic for validation. These classes must now be instanced by passing ",(0,o.jsx)(n.em,{children:"all"})," non-defaulted properties as named arguments (kwargs). e.g. an ",(0,o.jsx)(n.code,{children:"Image"})," now requires both ",(0,o.jsx)(n.code,{children:"filename"})," and ",(0,o.jsx)(n.code,{children:"sensor_name"})," to be specified."]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Ensure named constructor args are present for all non-defaulted fields for model classes like ",(0,o.jsx)(n.code,{children:"Image"})," and ",(0,o.jsx)(n.code,{children:"PointCloud"}),".","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["For instance ",(0,o.jsx)(n.code,{children:"filename"})," was not previously required to be a named arg, now it is."]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,o.jsx)(n.h2,{id:"non-breaking-changes",children:"Non-breaking changes"}),"\n",(0,o.jsx)(n.h3,{id:"environment-variables",children:"Environment variables"}),"\n",(0,o.jsxs)(n.p,{children:["Environment variables used by our libraries which are named with the prefix ",(0,o.jsx)(n.code,{children:"ANNOTELL_"})," now have a ",(0,o.jsx)(n.code,{children:"KOGNIC_"})," equivalent, e.g. ",(0,o.jsx)(n.code,{children:"ANNOTELL_CREDENTIALS"}),". The old names will continue to work for the time being, with the library code preferring the newer name if both are set. Future changes are not guaranteed to be backwards compatible (e.g. introduction of new variables, or renaming, may not be applied to both prefixes). We therefore recommend that any scripts are updated at the first opportunity."]}),"\n",(0,o.jsx)(n.h3,{id:"validation",children:"Validation"}),"\n",(0,o.jsxs)(n.p,{children:["Many scene model objects (e.g. ",(0,o.jsx)(n.code,{children:"Image"}),", ",(0,o.jsx)(n.code,{children:"PointCloud"}),", ",(0,o.jsx)(n.code,{children:"LidarsAndCameras"}),") have been converted from Python ",(0,o.jsx)(n.code,{children:"@dataclass"})," to Pydantic models."]}),"\n",(0,o.jsx)(n.p,{children:"Client-side validation errors will now be reported differently for these classes. Validation is stricter but the error messages are also more descriptive."}),"\n",(0,o.jsx)(n.p,{children:"Typically validation will be failed because of significant problems: using the wrong datatype for a field, or missing required parameters for an object. Server-side validation is still used to check that the content/values of the input are sound."})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>t});var o=i(6540);const a={},s=o.createContext(a);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);